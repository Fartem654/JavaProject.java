<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Создание бригады</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-primary mb-4">
  <div class="container">
    <a class="navbar-brand" href="/">Аварийная служба</a>
    <div class="navbar-nav">
      <a class="nav-link" th:href="@{/requests}">Заявки</a>
      <a class="nav-link active" th:href="@{/brigades}">Бригады</a>
      <a class="nav-link" th:href="@{/assignments}">Назначения</a>
    </div>
  </div>
</nav>

<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>Создание новой бригады</h1>
        <a th:href="@{/brigades}" class="btn btn-secondary">Назад к списку</a>
      </div>

      <div class="card">
        <div class="card-body">
          <form th:action="@{/brigades}"
                th:object="${brigadeForm}"
                method="post">

            <div class="mb-3">
              <label for="brigadeCode" class="form-label">
                <strong>Код бригады *</strong>
              </label>
              <input type="text"
                     class="form-control"
                     id="brigadeCode"
                     th:field="*{brigadeCode}"
                     placeholder="Например: Б-001, АВАР-1"
                     required>
              <div class="form-text">
                Уникальный идентификатор бригады. Будет использоваться в отчетах и назначениях.
              </div>
              <div class="text-danger" th:if="${#fields.hasErrors('brigadeCode')}">
                <span th:errors="*{brigadeCode}"></span>
              </div>
            </div>

            <div class="mb-3">
              <label for="vehicleNumber" class="form-label">
                <strong>Номер машины *</strong>
              </label>
              <input type="text"
                     class="form-control"
                     id="vehicleNumber"
                     th:field="*{vehicleNumber}"
                     placeholder="Например: А123БВ77, А123БВ177"
                     pattern="[А-ЯЁ]{1}[0-9]{3}[А-ЯЁ]{2}[0-9]{2,3}"
                     title="Формат: А123БВ77 или А123БВ177"
                     required>
              <div class="form-text">
                Государственный регистрационный номер служебного автомобиля.
              </div>
              <div class="text-danger" th:if="${#fields.hasErrors('vehicleNumber')}">
                <span th:errors="*{vehicleNumber}"></span>
              </div>
            </div>

            <div class="mb-3">
              <label for="foremanName" class="form-label">
                <strong>Имя бригадира *</strong>
              </label>
              <input type="text"
                     class="form-control"
                     id="foremanName"
                     th:field="*{foremanName}"
                     placeholder="Например: Иванов Иван Иванович"
                     required>
              <div class="text-danger" th:if="${#fields.hasErrors('foremanName')}">
                <span th:errors="*{foremanName}"></span>
              </div>
            </div>

            <div class="mb-3">
              <label for="foremanPhone" class="form-label">
                <strong>Телефон бригадира *</strong>
              </label>
              <input type="tel"
                     class="form-control"
                     id="foremanPhone"
                     th:field="*{foremanPhone}"
                     placeholder="Например: +7 999 123-45-67"
                     pattern="[\+0-9\s\-\(\)]+"
                     title="Введите номер телефона"
                     required>
              <div class="form-text">
                Контактный телефон для экстренной связи.
              </div>
              <div class="text-danger" th:if="${#fields.hasErrors('foremanPhone')}">
                <span th:errors="*{foremanPhone}"></span>
              </div>
            </div>

            <div class="mb-3" th:if="${error != null}">
              <div class="alert alert-danger">
                <span th:text="${error}"></span>
              </div>
            </div>

            <div class="d-flex justify-content-between mt-4">
              <button type="submit" class="btn btn-primary">
                Создать бригаду
              </button>
              <a th:href="@{/brigades}" class="btn btn-outline-secondary">
                Отмена
              </a>
            </div>
          </form>
        </div>
      </div>

      <div class="card mt-3">
        <div class="card-body">
          <h6 class="card-title">Примечание:</h6>
          <ul class="mb-0">
            <li>Новая бригада создается со статусом <span class="badge bg-success">Свободен</span></li>
            <li>Код бригады и номер машины должны быть уникальными и не оканчиваться на _v...</li>
            <li>После создания бригаду можно будет назначить на заявку</li>
            <li>Все поля обязательны для заполнения</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>